//get the email address from the user

var email = prompt("Please enter your email address:");

//use an AJAX request to send the email address to the server-side script

var xhr = new XMLHttpRequest();
xhr.open("POST", "save_email.php", true);
xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xhr.onreadystatechange = function() {
    if (xhr.readyState === 4 && xhr.status === 200) {
        alert("Your email has been saved to our newsletter list.");
    }
}

xhr.send("email=" + email);


<?php
//connect to the database
$conn = new mysqli("host", "username", "password", "database_name");
// check connection
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
} 

$email = $_POST['email'];

//validate email address
if(!filter_var($email, FILTER_VALIDATE_EMAIL)) {
    die("Invalid email address.");
}

// check if the email address already exists in the database
$result = $conn->query("SELECT email FROM emails WHERE email='$email'");

if ($result->num_rows > 0) {
    die("Email already exists in our newsletter list.");
}
else {
    // create the table if it doesn't exist
    $conn->query("CREATE TABLE IF NOT EXISTS emails (email VARCHAR(255))");
    // insert the email address into the table
    $conn->query("INSERT INTO emails (email) VALUES ('$email')");
    echo "Email has been added to our newsletter list.";
}
$conn->close();
?>








<?php
//connect to the database
$conn = new mysqli("host", "username", "password", "database_name");
// check connection
if ($conn->connect_error) {
    $response = array(
        "status" => "error",
        "message" => "Connection failed: " . $conn->connect_error
    );
    echo json_encode($response);
    die();
} 

$email = $_POST['email'];

//validate email address
if(!filter_var($email, FILTER_VALIDATE_EMAIL)) {
    $response = array(
        "status" => "error",
        "message" => "Invalid email address."
    );
    echo json_encode($response);
    die();
}

// check if the email address already exists in the database
$result = $conn->query("SELECT email FROM emails WHERE email='$email'");

if ($result->num_rows > 0) {
    $response = array(
        "status" => "error",
        "message" => "Email already exists in our newsletter list."
    );
    echo json_encode($response);
    die();
}
else {
    // create the table if it doesn't exist
    $conn->query("CREATE TABLE IF NOT EXISTS emails (email VARCHAR(255))");
    // insert the email address into the table
    $conn->query("INSERT INTO emails (email) VALUES ('$email')");
    $response = array(
        "status" => "success",
        "message" => "Email has been added to our newsletter list."
    );
    echo json_encode($response);
}
$conn->close();
?>






var xhr = new XMLHttpRequest();
xhr.open("POST", "save_email.php", true);
xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xhr.onreadystatechange = function() {
    if (xhr.readyState === 4 && xhr.status === 200) {
        var response = JSON.parse(xhr.responseText);
        if(response.status === "success"){
            alert(response.message);
        }
        else{
            alert(response.message);
        }
    }
}
xhr.send("email=" + email);



xhr.open("POST", "./php/save_email.php", true);
xhr.setRequestHeader("Content-type", "application/json");

const data = { email: email.value };
const json = JSON.stringify(data);
xhr.send(json);
